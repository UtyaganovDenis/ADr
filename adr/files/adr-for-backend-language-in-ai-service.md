# ADR for Backend language in AI service   
   
**Дата**: 2024-11-18
**Решение**: Использовать Python в качестве основного языка программирования для микросервиса с ИИ-моделью   
 --- 
### Контекст   
Проект включает разработку микросервиса, который будет обрабатывать запросы, связанные с использованием ИИ-модели. Основная задача микросервиса — предоставление API для выполнения вычислений на основе модели машинного обучения (ML).   
Основные требования к языку программирования:   
1. **Поддержка библиотек и фреймворков для ML/ИИ**: язык должен обеспечивать доступ к современным библиотекам машинного обучения и ИИ, а также поддерживать интеграцию с популярными платформами для обучения моделей.   
2. **Производительность**: достаточная для работы с ИИ-моделями (в том числе с использованием GPU/TPU).   
3. **Лёгкость интеграции**: наличие инструментов для разработки API и интеграции с другими сервисами.   
4. **Активное сообщество**: наличие богатой экосистемы и поддержки.   
   
Рассматриваемые варианты: **Python**, **Go**, **C++**.   
 --- 
### Анализ альтернатив   
### 1. Python   
### Поддержка библиотек и фреймворков для ML/ИИ   
Python является лидером в области машинного обучения и ИИ благодаря огромному количеству библиотек и фреймворков: TensorFlow, PyTorch, Keras, scikit-learn, NumPy и др. Он также поддерживает интеграцию с популярными платформами для обучения моделей, такими как Google AI и AWS SageMaker.   
### Производительность   
Хотя Python уступает Go и C++ в чистой производительности, он компенсирует это поддержкой оптимизированных библиотек, работающих на C/C++ (например, NumPy и TensorFlow). Python также поддерживает GPU/TPU через CUDA и другие фреймворки.   
### Лёгкость интеграции   
Python имеет множество инструментов для разработки API и интеграции: Flask, FastAPI, Django и Tornado. Он легко интегрируется с другими сервисами и платформами.   
### Активное сообщество   
Python имеет одно из самых активных сообществ в мире, что обеспечивает быструю поддержку, огромное количество готовых решений и документации.   
### 2. Go   
### Поддержка библиотек и фреймворков для ML/ИИ   
Go имеет ограниченную поддержку библиотек для машинного обучения и ИИ. Существуют некоторые библиотеки, такие как Gorgonia и Gonum, но они менее популярны и функциональны по сравнению с Python.   
### Производительность   
Go обладает высокой производительностью и эффективным управлением памятью, что делает его хорошим выбором для высоконагруженных систем. Однако для работы с нейросетями он уступает Python из-за ограниченной поддержки GPU.   
### Лёгкость интеграции   
Go имеет встроенные инструменты для разработки API и микросервисов, такие как стандартная библиотека HTTP и фреймворки Gin и Echo. Он отлично подходит для создания высоконагруженных API.   
### Активное сообщество   
Сообщество Go активно растёт, но оно значительно меньше, чем у Python. Количество библиотек и готовых решений для ML/ИИ ограничено.   
### 3. C++   
### Поддержка библиотек и фреймворков для ML/ИИ   
C++ поддерживает мощные библиотеки для машинного обучения и ИИ, такие как TensorFlow, Caffe и OpenCV. Однако разработка на C++ требует больше времени и усилий.   
### Производительность   
C++ обеспечивает наивысшую производительность среди рассматриваемых языков. Он идеально подходит для задач, требующих максимальной оптимизации и использования ресурсов, включая GPU.   
### Лёгкость интеграции   
Интеграция с другими сервисами и разработка API на C++ сложнее, чем на Python и Go. Существуют фреймворки, такие как cpprestsdk, но они требуют больше времени для освоения и написание реализации.   
### Активное сообщество   
C++ имеет большое сообщество, но оно менее ориентировано на ML/ИИ, чем Python. Разработка требует глубоких знаний языка и инструментов.   
 --- 
### Решение   
После анализа было принято решение использовать **Python** для разработки микросервиса с ИИ-моделью.   
 --- 
### Обоснование выбора   
1. **Экосистема и библиотеки**:
Python — основной язык в области машинного обучения и ИИ, поддерживающий все популярные библиотеки и платформы. Это позволяет использовать как готовые решения, так и разрабатывать кастомные модели.   
2. **Простота интеграции**:
Python предоставляет удобные инструменты для создания API (например, FastAPI), что позволяет быстро интегрировать микросервис с остальной системой.   
3. **Быстрое прототипирование**:
Python идеально подходит для исследования данных, обучения моделей и тестирования гипотез.   
4. **Поддержка GPU и других вычислительных платформ**:
Многие библиотеки Python (например, TensorFlow и PyTorch) имеют встроенную поддержку работы с GPU и TPU, что упрощает развёртывание моделей в высокопроизводительных средах.   
5. **Активное сообщество**:
Python имеет огромное сообщество и множество документации, что облегчает решение возникающих задач и упрощает обучение команды.   
6. **Сравнение с альтернативами**:   
    - Java и Go уступают Python по широте доступных библиотек для ИИ.   
    - C++ предоставляет высокую производительность, но сложен для прототипирования и поддержки, что делает его менее подходящим для наших целей.   
 --- 
   
### Последствия   
1. **Положительные**:   
    - Быстрая разработка и удобство интеграции.   
    - Широкий выбор готовых библиотек и инструментов для работы с ИИ.   
    - Простота в обучении новых членов команды и поддержке кода.   
2. **Негативные**:   
    - Возможные ограничения по производительности в высоконагруженных системах без дополнительных оптимизаций.   
    - Зависимость от сторонних библиотек, написанных на C/C++.   
 --- 
   
   
